<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>状态TAB联动功能测试 - 简化版</title>
    <link rel="stylesheet" href="customs-product-management.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-title {
            color: #333;
            margin-bottom: 20px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .console-output {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .test-instructions {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .status-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">状态TAB联动功能测试 - 简化版</h1>
        
        <div class="test-instructions">
            <h3>测试说明：</h3>
            <p>点击下面的测试按钮来验证状态TAB联动功能：</p>
            <ul>
                <li><strong>关务评估TAB</strong>：应该隐藏认证状态、要素状态、是否产生订单、首次产生订单时间，自动勾选关务状态（待提交、待确认）</li>
                <li><strong>认证评估TAB</strong>：应该隐藏关务状态、要素状态、是否产生订单、服务商、首次产生订单时间，自动勾选认证状态（待提交）</li>
                <li><strong>要素确认TAB</strong>：应该隐藏数据来源、服务商、要素状态、创建人ERP、创建时间、评估截止时间、关务状态、认证状态，自动勾选是否产生订单（是）</li>
                <li><strong>全部TAB</strong>：应该显示所有查询条件，清除所有选择</li>
            </ul>
        </div>

        <div class="status-info">
            <strong>当前状态：</strong><span id="current-status">未设置</span>
        </div>

        <!-- 测试按钮 -->
        <div>
            <button class="test-button" onclick="testStatusTab('all')">测试全部TAB</button>
            <button class="test-button" onclick="testStatusTab('customs-pending')">测试关务评估TAB</button>
            <button class="test-button" onclick="testStatusTab('cert-pending')">测试认证评估TAB</button>
            <button class="test-button" onclick="testStatusTab('element-pending')">测试要素确认TAB</button>
        </div>

        <!-- 状态TAB按钮 -->
        <div class="status-tabs">
            <button class="status-tab-btn active" data-status="all">
                全部
                <span class="badge">150</span>
            </button>
            <button class="status-tab-btn" data-status="customs-pending">
                关务评估
                <span class="badge">45</span>
            </button>
            <button class="status-tab-btn" data-status="cert-pending">
                认证评估
                <span class="badge">32</span>
            </button>
            <button class="status-tab-btn" data-status="element-pending">
                要素确认
                <span class="badge">28</span>
            </button>
        </div>

        <!-- 查询条件表单 -->
        <div class="search-form">
            <div class="search-row">
                <div class="form-group" id="data-source">
                    <label for="data-source-select">数据来源：</label>
                    <div class="multi-select-container" id="data-source-select" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="excel">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">Excel导入</span>
                            </div>
                            <div class="multi-select-option" data-value="wimp">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">WIMP</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="service-provider-group">
                    <label for="service-provider">服务商：</label>
                    <div class="multi-select-container" id="service-provider" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="keju">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">科橘</span>
                            </div>
                            <div class="multi-select-option" data-value="liexin">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">猎芯</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="customs-status-group">
                    <label for="customs-status">关务评估状态：</label>
                    <div class="multi-select-container" id="customs-status" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="pending-submit">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">待提交</span>
                            </div>
                            <div class="multi-select-option" data-value="pending-confirm">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">待确认</span>
                            </div>
                            <div class="multi-select-option" data-value="confirmed">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">已确认</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="cert-status-group">
                    <label for="cert-status">强制性认证评估状态：</label>
                    <div class="multi-select-container" id="cert-status" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="pending-submit">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">待提交</span>
                            </div>
                            <div class="multi-select-option" data-value="submitted">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">已提交</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="search-row">
                <div class="form-group" id="element-status-group">
                    <label for="element-status">要素状态：</label>
                    <div class="multi-select-container" id="element-status" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="pending-edit">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">待编辑</span>
                            </div>
                            <div class="multi-select-option" data-value="pending-confirm">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">待确认</span>
                            </div>
                            <div class="multi-select-option" data-value="confirmed">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">已确认</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="has-order-group">
                    <label for="has-order">是否产生订单：</label>
                    <div class="multi-select-container" id="has-order" data-placeholder="请选择...">
                        <div class="multi-select-display">
                            <span class="multi-select-placeholder">请选择...</span>
                            <span class="multi-select-arrow">▼</span>
                        </div>
                        <div class="multi-select-dropdown">
                            <div class="multi-select-option" data-value="yes">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">是</span>
                            </div>
                            <div class="multi-select-option" data-value="no">
                                <div class="multi-select-checkbox"></div>
                                <span class="multi-select-option-text">否</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="first-order-time-group">
                    <label for="first-order-time">首次产生订单时间：</label>
                    <div class="ant-picker ant-picker-range ant-picker-focused">
                        <input type="date" id="first-order-time-start" class="datetime-compact">
                        <span class="datetime-separator">至</span>
                        <input type="date" id="first-order-time-end" class="datetime-compact">
                    </div>
                </div>
            </div>
            
            <div class="search-row">
                <div class="form-group" id="creator-erp-group">
                    <label for="creator-erp-input">创建人ERP：</label>
                    <input type="text" id="creator-erp-input" placeholder="请输入创建人ERP">
                </div>
                
                <div class="form-group" id="create-time-group">
                    <label for="create-time">创建时间：</label>
                    <div class="ant-picker ant-picker-range ant-picker-focused">
                        <input type="date" id="create-time-start-input" class="datetime-compact">
                        <span class="datetime-separator">至</span>
                        <input type="date" id="create-time-end-input" class="datetime-compact">
                    </div>
                </div>
                
                <div class="form-group" id="evaluation-deadline-group">
                    <label for="deadline">评估截止时间：</label>
                    <div class="ant-picker ant-picker-range ant-picker-focused">
                        <input type="date" id="deadline-start" class="datetime-compact">
                        <span class="datetime-separator">至</span>
                        <input type="date" id="deadline-end" class="datetime-compact">
                    </div>
                </div>
            </div>
        </div>

        <div class="console-output" id="console-output">
            <div>控制台输出将显示在这里...</div>
        </div>
    </div>

    <script>
        // 重写console.log来显示在页面上
        const originalConsoleLog = console.log;
        const consoleOutput = document.getElementById('console-output');
        
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const div = document.createElement('div');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        console.error = function(...args) {
            console.log('ERROR:', ...args);
        };

        // 测试函数
        function testStatusTab(status) {
            console.log(`\n=== 开始测试状态TAB: ${status} ===`);
            document.getElementById('current-status').textContent = status;
            
            // 调用状态TAB切换函数
            if (typeof switchStatusTab === 'function') {
                switchStatusTab(status);
            } else {
                console.error('switchStatusTab 函数未找到');
            }
        }

        // 检查组件显示状态
        function checkComponentVisibility() {
            const components = [
                'data-source',
                'service-provider-group',
                'customs-status-group',
                'cert-status-group',
                'element-status-group',
                'has-order-group',
                'first-order-time-group',
                'creator-erp-group',
                'create-time-group',
                'evaluation-deadline-group'
            ];
            
            console.log('=== 组件显示状态检查 ===');
            components.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    const isVisible = element.style.display !== 'none';
                    console.log(`${id}: ${isVisible ? '显示' : '隐藏'}`);
                }
            });
        }

        // 页面加载完成后的初始化
        window.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成，开始初始化...');
            
            // 延迟一下确保所有脚本都加载完成
            setTimeout(() => {
                console.log('检查必要的函数是否存在...');
                console.log('switchStatusTab:', typeof switchStatusTab);
                console.log('triggerStatusTabLinkage:', typeof triggerStatusTabLinkage);
                console.log('setMultiSelectValues:', typeof setMultiSelectValues);
                
                // 添加定时检查组件状态的功能
                setInterval(checkComponentVisibility, 5000);
            }, 1000);
        });
    </script>
    
    <script src="customs-product-management.js"></script>
</body>
</html>
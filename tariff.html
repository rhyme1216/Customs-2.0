<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>税则库管理</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tariff.css">
</head>
<body>
    <div class="sidebar">
        <div class="menu">
            <div class="menu-item">
                <div class="menu-title" data-menu="product">商品管理</div>
                <div class="submenu" id="product-submenu">
                    <div class="submenu-item">跨境商品管理</div>
                </div>
            </div>
            
            <div class="menu-item">
                <div class="menu-title active" data-menu="tax">税务管理</div>
                <div class="submenu open" id="tax-submenu">
                    <div class="submenu-item active" data-tariff="true">关务税则维护</div>
                </div>
            </div>
            
            <div class="menu-item">
                <div class="menu-title" data-menu="customs">关务管理</div>
                <div class="submenu" id="customs-submenu">
                    <div class="submenu-item" onclick="window.location.href='customs-product-management.html'">关务商品评估</div>
                    <div class="submenu-item" onclick="window.location.href='product-element-confirmation.html'">商品要素确认</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-content-wrapper">
        <div class="container">
        <!-- 面包屑导航 -->
        <div class="breadcrumb">
            <span>税务管理</span>
            <span class="separator">></span>
            <span id="current-country">关务税则维护</span>
        </div>

        <!-- 查询条件区域 -->
        <div class="search-section">
            <div class="search-form">
                <div class="form-group">
                    <label for="hscode-input">海关编码：</label>
                    <textarea id="hscode-input" placeholder="请输入海关编码，多个编码请回车换行分隔"></textarea>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="searchTariff()">查询</button>
                    <button class="btn btn-secondary" onclick="resetSearch()">重置</button>
                </div>
            </div>
        </div>

        <!-- 国家选择标签 -->
        <div class="country-tabs">
            <button class="tab-btn active" data-country="china">中国</button>
            <button class="tab-btn" data-country="thailand">泰国</button>
            <button class="tab-btn" data-country="vietnam">越南</button>
            <button class="tab-btn" data-country="malaysia">马来</button>
            <button class="tab-btn" data-country="indonesia">印尼</button>
            <button class="tab-btn" data-country="hungary">匈牙利</button>
            <button class="tab-btn" data-country="brazil">巴西</button>
        </div>

        <!-- 操作按钮区域 -->
        <div class="action-section">
            <button class="btn btn-success" onclick="addTariff()">新增</button>
            <button class="btn btn-warning" onclick="batchOperation()">批量操作</button>
        </div>

        <!-- 数据表格容器 -->
        <div class="table-container">
            <div class="table-wrapper">
                <table id="tariff-table" class="data-table">
                    <thead id="table-header">
                        <!-- 表头将根据选择的国家动态生成 -->
                    </thead>
                    <tbody id="table-body">
                        <!-- 表格数据将根据选择的国家动态生成 -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 分页 -->
        <div class="pagination">
            <button class="btn btn-sm" onclick="prevPage()" id="prev-btn">上一页</button>
            <span id="page-info">第1页，共1页</span>
            <div class="page-jump">
                <span>跳至</span>
                <input type="number" id="page-input" min="1" style="width: 50px; height: 24px; text-align: center; border: 1px solid #ddd; border-radius: 4px; margin: 0 5px;">
                <span>页</span>
                <button class="btn btn-sm" onclick="jumpToPage()">跳转</button>
            </div>
            <button class="btn btn-sm" onclick="nextPage()" id="next-btn">下一页</button>
            <div class="page-size-info">
                <span>共 <span id="total-records">0</span> 条，每页显示 20 条</span>
            </div>
        </div>
        </div>
    </div>

    <!-- 中国HSCODE编辑弹窗 -->
    <div id="china-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container large-modal">
            <div class="modal-header">
                <h3>中国HSCODE编辑</h3>
                <button class="modal-close" onclick="closeChinaEditModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <!-- 基本信息 -->
                <div class="section">
                    <h4>基本信息</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>HS Code：</label>
                            <span id="edit-hscode">-</span>
                        </div>
                        <div class="form-group">
                            <label>最后更新时间：</label>
                            <span id="edit-update-time">-</span>
                        </div>
                    </div>
                </div>

                <!-- 中国税率信息 -->
                <div class="section">
                    <h4>中国税率信息</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-tax-rate">出口退税率%：<span class="required">*</span></label>
                            <input type="number" id="edit-tax-rate" min="0" max="100" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-tariff-rate">出口关税税率%：</label>
                            <input type="number" id="edit-tariff-rate" min="0" max="100" step="0.1">
                        </div>
                    </div>
                </div>

                <!-- 其他信息 -->
                <div class="section">
                    <h4>其他信息</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-is-controlled">是否管制：<span class="required">*</span></label>
                            <select id="edit-is-controlled" required onchange="toggleControlInfo()">
                                <option value="否">否</option>
                                <option value="是">是</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row" id="control-info-group" style="display: none;">
                        <div class="form-group full-width">
                            <label for="edit-control-info">管制信息：<span class="required">*</span></label>
                            <textarea id="edit-control-info" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="edit-remarks">备注：</label>
                            <textarea id="edit-remarks" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- 申报要素项配置 -->
                <div class="section">
                    <h4>申报要素项配置</h4>
                    <div class="table-controls">
                        <button class="btn btn-primary" onclick="addDeclarationElement()">添加</button>
                    </div>
                    <div class="table-wrapper">
                        <table class="declaration-table">
                            <thead>
                                <tr>
                                    <th width="80">排序</th>
                                    <th width="200">申报要素项名称</th>
                                    <th width="100">是否必填</th>
                                    <th width="150">操作</th>
                                </tr>
                            </thead>
                            <tbody id="declaration-elements-tbody">
                                <!-- 动态生成申报要素项列表 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeChinaEditModal()">取消</button>
                <button class="btn btn-primary" onclick="saveChinaEdit()">保存</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="tariff.js"></script>
</body>
</html>

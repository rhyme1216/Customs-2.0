<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关务商品评估</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="customs-product-management.css">
</head>
<body>
    <div class="sidebar">
        <div class="menu">
            <div class="menu-item">
                <div class="menu-title" data-menu="product">商品管理</div>
                <div class="submenu" id="product-submenu">
                    <div class="submenu-item">跨境商品管理</div>
                </div>
            </div>
            
            <div class="menu-item">
                <div class="menu-title" data-menu="tax">税务管理</div>
                <div class="submenu" id="tax-submenu">
                    <div class="submenu-item" data-tariff="true">关务税则维护</div>
                </div>
            </div>
            
            <div class="menu-item">
                <div class="menu-title active" data-menu="customs">关务管理</div>
                <div class="submenu open" id="customs-submenu">
                    <div class="submenu-item active">关务商品评估</div>
                    <div class="submenu-item" onclick="window.location.href='product-element-confirmation.html'">商品要素确认</div>
                    <div class="submenu-item" onclick="window.location.href='customs-declaration-management.html'">报关单管理</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-content-wrapper">
        <div class="container">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <span>关务管理</span>
                <span class="separator">></span>
                <span>关务商品评估</span>
            </div>

            <!-- 状态TAB区域 -->
            <div class="status-tabs">
                <button class="status-tab-btn active" data-status="all">
                    全部
                    <span class="badge">1,234</span>
                </button>
                <button class="status-tab-btn" data-status="customs-pending">
                    关务评估
                    <span class="badge">56</span>
                </button>
                <button class="status-tab-btn" data-status="cert-pending">
                    认证评估
                    <span class="badge">23</span>
                </button>
            </div>

            <!-- 查询条件区域 -->
            <div class="search-section">
                <div class="search-form">
                    <!-- 第一行：4个组件 -->
                    <div class="search-row">
                        <div class="form-group" id="domestic-sku-group">
                            <label for="domestic-sku">国内SKU：</label>
                            <textarea id="domestic-sku" placeholder="请输入国内SKU，多个请回车换行分隔"></textarea>
                        </div>
                        <div class="form-group" id="international-sku-group">
                            <label for="international-sku">国际SKU：</label>
                            <textarea id="international-sku" placeholder="请输入国际SKU，多个请回车换行分隔"></textarea>
                        </div>
                        <div class="form-group" id="hscode-group">
                            <label for="hscode">海关编码：</label>
                            <textarea id="hscode" placeholder="请输入海关编码，多个请回车换行分隔"></textarea>
                        </div>
                        <div class="form-group" id="product-title-group">
                            <label for="product-title">商品标题：</label>
                            <input type="text" id="product-title" placeholder="请输入商品标题">
                        </div>
                    </div>
                    <!-- 第二行：4个组件 -->
                    <div class="search-row">
                        <div class="form-group" id="data-source">
                            <label for="data-source-select">数据来源：</label>
                            <div class="multi-select-container" id="data-source-select" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="excel">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">Excel导入</span>
                                    </div>
                                    <div class="multi-select-option" data-value="wimp">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">WIMP</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="service-provider-group">
                            <label for="service-provider">服务商：</label>
                            <div class="multi-select-container" id="service-provider" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="keju">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">科橘</span>
                                    </div>
                                    <div class="multi-select-option" data-value="liexin">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">猎芯</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="cert-status-group">
                            <label for="cert-status">认证评估状态：</label>
                            <div class="multi-select-container" id="cert-status" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="pending-submit">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">待提交</span>
                                    </div>
                                    <div class="multi-select-option" data-value="submitted">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">已提交</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="has-order-group">
                            <label for="has-order">是否产生订单：</label>
                            <div class="multi-select-container" id="has-order" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="yes">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">是</span>
                                    </div>
                                    <div class="multi-select-option" data-value="no">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">否</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 第三行：4个组件 -->
                    <div class="search-row">
                        <div class="form-group" id="customs-status-group">
                            <label for="customs-status">关务评估状态：</label>
                            <div class="multi-select-container" id="customs-status" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="pending-submit">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">待提交</span>
                                    </div>
                                    <div class="multi-select-option" data-value="pending-confirm">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">待确认</span>
                                    </div>
                                    <div class="multi-select-option" data-value="confirmed">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">已确认</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="first-order-time-group">
                            <label for="first-order-time">首次产生订单时间：</label>
                            <div class="ant-picker ant-picker-range ant-picker-focused">
                                <input type="date" id="first-order-time-start" class="datetime-compact">
                                <span class="datetime-separator">至</span>
                                <input type="date" id="first-order-time-end" class="datetime-compact">
                            </div>
                        </div>
                        <div class="form-group" id="product-status">
                            <label for="product-status-select">商品评估状态：</label>
                            <div class="multi-select-container" id="product-status-select" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="inactive">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">未生效</span>
                                    </div>
                                    <div class="multi-select-option" data-value="active">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">已生效</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="element-status-group">
                            <label for="element-status">要素状态：</label>
                            <div class="multi-select-container" id="element-status" data-placeholder="请选择...">
                                <div class="multi-select-display">
                                    <span class="multi-select-placeholder">请选择...</span>
                                    <span class="multi-select-arrow">▼</span>
                                </div>
                                <div class="multi-select-dropdown">
                                    <div class="multi-select-option" data-value="pending-submit">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">待提交</span>
                                    </div>
                                    <div class="multi-select-option" data-value="pending-confirm">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">待确认</span>
                                    </div>
                                    <div class="multi-select-option" data-value="confirmed">
                                        <div class="multi-select-checkbox"></div>
                                        <span class="multi-select-option-text">已确认</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="creator-erp-group">
                            <label for="creator-erp-input">创建人ERP：</label>
                            <input type="text" id="creator-erp-input" placeholder="请输入创建人ERP">
                        </div>
                    </div>
                    <!-- 第四行：4个组件 -->
                    <div class="search-row">
                        <div class="form-group" id="create-time-group">
                            <label for="create-time">创建时间：</label>
                            <div class="ant-picker ant-picker-range ant-picker-focused">
                                <input type="date" id="create-time-start-input" class="datetime-compact">
                                <span class="datetime-separator">至</span>
                                <input type="date" id="create-time-end-input" class="datetime-compact">
                            </div>
                        </div>
                        <div class="form-group" id="evaluation-deadline-group">
                            <label for="deadline">评估截止时间：</label>
                            <div class="ant-picker ant-picker-range ant-picker-focused">
                                <input type="date" id="deadline-start" class="datetime-compact">
                                <span class="datetime-separator">至</span>
                                <input type="date" id="deadline-end" class="datetime-compact">
                            </div>
                        </div>
                        <div class="form-group" id="updater-erp-group">
                            <label for="updater-erp">最后更新人ERP：</label>
                            <input type="text" id="updater-erp" placeholder="请输入更新人ERP">
                        </div>
                        <div class="form-group" id="update-time-group">
                            <label for="update-time">最后更新时间：</label>
                            <div class="ant-picker ant-picker-range ant-picker-focused">
                                <input type="date" id="update-time-start" class="datetime-compact">
                                <span class="datetime-separator">至</span>
                                <input type="date" id="update-time-end" class="datetime-compact">
                            </div>
                        </div>
                    </div>
                    <!-- 查询按钮组放在右下角 -->
                    <div class="search-actions">
                        <div class="search-buttons">
                            <button class="btn btn-primary" onclick="searchProducts()">查询</button>
                            <button class="btn btn-secondary" onclick="resetSearch()">重置</button>
                            <a href="javascript:void(0)" class="toggle-link" id="search-toggle">
                                <span id="toggle-text">收起</span>
                                <span id="toggle-icon">▲</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 国家选择标签 -->
            <div class="country-tabs">
                <button class="tab-btn active" data-country="china">
                    中国
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="thailand">
                    泰国
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="vietnam">
                    越南
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="malaysia">
                    马来
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="indonesia">
                    印尼
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="hungary">
                    匈牙利
                    <span class="badge">6</span>
                </button>
                <button class="tab-btn" data-country="brazil">
                    巴西
                    <span class="badge">6</span>
                </button>
            </div>

            <!-- 操作按钮区域 -->
            <div class="action-section">
                <button class="btn btn-success" onclick="exportData()">导出</button>
                <button class="btn btn-primary" onclick="importProducts()">导入商品</button>
                <button class="btn btn-primary" onclick="importCustomsAssessment()">导入关务评估</button>
                <button class="btn btn-warning" onclick="customsAssessment()">关务评估</button>
                <button class="btn btn-info" onclick="assignServiceProvider()">分配服务商</button>
                <button class="btn btn-success" onclick="customsConfirm()">关务确认</button>
                <button class="btn btn-warning" onclick="certificationAssessment()">认证评估</button>
            </div>

            <!-- 数据表格容器 -->
            <div class="table-container">
                <div class="table-wrapper">
                    <table id="product-table" class="data-table">
                        <thead id="table-header">
                            <tr>
                                <th class="fixed-column checkbox-column">
                                    <input type="checkbox" id="select-all" onchange="toggleSelectAll()">
                                </th>
                                <th class="fixed-column sku-column">国内SKU</th>
                                <th>国际SKU</th>
                                <th>商品中文名称</th>
                                <th>中国HSCODE</th>
                                <th class="numeric">出口退税率%</th>
                                <th class="numeric">出口关税税率%</th>
                                <th>是否管制</th>
                                <th>管制信息</th>
                                <th>评估服务商</th>
                                <th>数据来源</th>
                                <th>采销ERP</th>
                                <th>评估截止时间</th>
                                <th>关务评估状态</th>
                                <th>强制性认证状态</th>
                                <th>商品评估状态</th>
                                <th>是否产生订单</th>
                                <th>首次产生订单时间</th>
                                <th>申报要素</th>
                                <th>申报中文品名</th>
                                <th>要素状态</th>
                                <th>创建人</th>
                                <th>采销备注</th>
                                <th>创建时间</th>
                                <th>更新人</th>
                                <th>更新时间</th>
                                <th class="fixed-column action-column">操作</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- 空列表，数据将通过JavaScript动态加载 -->
                            <tr class="empty-row">
                                <td colspan="27" class="empty-message">
                                    <div class="empty-content">
                                        <div class="empty-icon">📦</div>
                                        <div class="empty-text">暂无数据</div>
                                        <div class="empty-desc">请调整查询条件后重新搜索</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 分页 -->
            <div class="pagination">
                <button class="btn btn-sm" onclick="prevPage()" id="prev-btn">上一页</button>
                <span id="page-info">第1页，共1页</span>
                <div class="page-jump">
                    <span>跳至</span>
                    <input type="number" id="page-input" min="1" style="width: 50px; height: 24px; text-align: center; border: 1px solid #ddd; border-radius: 4px; margin: 0 5px;">
                    <span>页</span>
                    <button class="btn btn-sm" onclick="jumpToPage()">跳转</button>
                </div>
                <button class="btn btn-sm" onclick="nextPage()" id="next-btn">下一页</button>
                <div class="page-size-info">
                    <span>共 <span id="total-records">0</span> 条，每页显示 20 条</span>
                </div>
            </div>
        </div>
    </div>

<!-- 编辑报关要素信息弹窗 -->
    <div id="element-edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>编辑报关要素信息</h3>
                <button class="modal-close" onclick="closeElementEditModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <!-- 商品信息展示区域 -->
                <div class="product-info-section">
                    <h4>商品信息</h4>
                    <div class="product-info-grid">
                        <div class="info-item">
                            <label>国内SKU：</label>
                            <a href="javascript:void(0)" id="modal-domestic-sku" class="sku-link">-</a>
                        </div>
                        <div class="info-item">
                            <label>国际SKU：</label>
                            <span id="modal-international-sku">-</span>
                        </div>
                        <div class="info-item">
                            <label>商品中文名称：</label>
                            <span id="modal-product-name">-</span>
                        </div>
                        <div class="info-item">
                            <label>中国HSCODE：</label>
                            <span id="modal-hscode">-</span>
                        </div>
                        <div class="info-item">
                            <label>品牌：</label>
                            <span id="modal-brand">-</span>
                        </div>
                        <div class="info-item">
                            <label>型号：</label>
                            <span id="modal-model">-</span>
                        </div>
                        <div class="info-item">
                            <label>品牌授权：</label>
                            <a href="javascript:void(0)" id="modal-brand-auth" class="sku-link">-</a>
                        </div>
                        <div class="info-item">
                            <label>申报中文品名：<span class="required" style="color: red;">*</span></label>
                            <input type="text" id="modal-declare-name" placeholder="请输入申报中文品名" required>
                        </div>
                        <div class="info-item">
                            <label>品牌授权情况：<span class="required" style="color: red;">*</span></label>
                            <select id="modal-brand-auth" required>
                                <option value="" disabled selected>请选择品牌授权情况</option>
                                <option value="有限制">有限制</option>
                                <option value="无限制">无限制</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 申报要素编辑区域 -->
                <div class="element-edit-section">
                    <h4>申报要素编辑</h4>
                    
                    <!-- 必填项 -->
                    <div class="required-elements">
                        <h5>必填项</h5>
                        <div class="element-fields" id="required-fields">
                            <!-- 动态生成必填项字段 -->
                        </div>
                    </div>
                    
                    <!-- 非必填项 -->
                    <div class="optional-elements">
                        <h5>非必填项</h5>
                        <div class="element-fields">
                            <div class="field-group">
                                <label for="element-gtin">GTIN：</label>
                                <input type="text" id="element-gtin" placeholder="请输入GTIN">
                            </div>
                            <div class="field-group">
                                <label for="element-cas">CAS：</label>
                                <input type="text" id="element-cas" placeholder="请输入CAS">
                            </div>
                            <div class="field-group">
                                <label for="element-other">其他：</label>
                                <input type="text" id="element-other" placeholder="请输入其他信息">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 申报要素预览 -->
                <div class="element-preview-section">
                    <h4>申报要素预览</h4>
                    <div class="element-preview" id="element-preview">
                        <!-- 实时显示拼接后的申报要素 -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="abandonElementEdit()">放弃编辑</button>
                <button class="btn btn-warning" onclick="savePendingConfirm()">保存待确认</button>
                <button class="btn btn-primary" onclick="confirmElement()">要素确认</button>
            </div>
        </div>
    </div>

    <!-- 非中国国家编辑要素信息弹窗（简化版） -->
    <div id="element-edit-modal-simple" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>编辑要素信息</h3>
                <button class="modal-close" onclick="closeSimpleElementEditModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <!-- 商品信息展示区域 -->
                <div class="product-info-section">
                    <h4>商品信息</h4>
                    <div class="product-info-grid">
                        <div class="info-item">
                            <label>国内SKU：</label>
                            <a href="javascript:void(0)" id="simple-modal-domestic-sku" class="sku-link">-</a>
                        </div>
                        <div class="info-item">
                            <label>国际SKU：</label>
                            <span id="simple-modal-international-sku">-</span>
                        </div>
                        <div class="info-item">
                            <label>商品中文名称：</label>
                            <span id="simple-modal-product-name">-</span>
                        </div>
                        <div class="info-item">
                            <label>商品英文名称：</label>
                            <span id="simple-modal-product-name-en">-</span>
                        </div>
                        <div class="info-item">
                            <label>商品当地名称：</label>
                            <span id="simple-modal-product-name-local">-</span>
                        </div>
                        <div class="info-item">
                            <label>中国HSCODE：</label>
                            <span id="simple-modal-hscode">-</span>
                        </div>
                        <div class="info-item">
                            <label>品牌：</label>
                            <span id="simple-modal-brand">-</span>
                        </div>
                        <div class="info-item">
                            <label>型号：</label>
                            <span id="simple-modal-model">-</span>
                        </div>
                        <div class="info-item">
                            <label>品牌授权：</label>
                            <a href="javascript:void(0)" id="simple-modal-brand-auth-display" class="sku-link">-</a>
                        </div>
                        <div class="info-item">
                            <label>品牌类型：</label>
                            <span id="simple-modal-brand-type-display">-</span>
                        </div>
                        <div class="info-item">
                            <label>申报英文品名：</label>
                            <input type="text" id="simple-modal-declare-name-en" placeholder="请输入申报英文品名">
                        </div>
                        <div class="info-item">
                            <label>申报当地品名：</label>
                            <input type="text" id="simple-modal-declare-name-local" placeholder="请输入申报当地品名">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="abandonSimpleElementEdit()">放弃编辑</button>
                <button class="btn btn-warning" onclick="saveSimplePendingConfirm()">保存待确认</button>
                <button class="btn btn-primary" onclick="confirmSimpleElement()">要素确认</button>
            </div>
        </div>
    </div>

<script src="data-simplified.js"></script>
    <script src="script.js"></script>
    <script src="customs-product-management.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ˜å åŠŸèƒ½æœ€ç»ˆæµ‹è¯•</title>
    <link rel="stylesheet" href="customs-product-management.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        
        .test-info {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .test-info h3 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .debug-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .debug-panel h4 {
            margin-top: 0;
        }
        
        .debug-output {
            font-family: monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .debug-output div {
            margin-bottom: 2px;
            padding: 2px 0;
        }
        
        .debug-output .error {
            color: #dc3545;
        }
        
        .debug-output .success {
            color: #28a745;
        }
        
        .debug-output .info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-info">
            <h3>ğŸ”§ æŠ˜å åŠŸèƒ½æœ€ç»ˆæµ‹è¯•</h3>
            <p><strong>ä¿®å¤å†…å®¹ï¼š</strong></p>
            <ul>
                <li>âœ… ç§»é™¤äº†HTMLä¸­çš„é‡å¤onclickäº‹ä»¶ç»‘å®š</li>
                <li>âœ… æ·»åŠ äº†ç¼ºå¤±çš„initMultiSelectComponents()å‡½æ•°</li>
                <li>âœ… ä¿®å¤äº†toggleSearchForm()å‡½æ•°çš„é€»è¾‘é”™è¯¯</li>
                <li>âœ… éªŒè¯äº†JavaScriptè¯­æ³•æ­£ç¡®æ€§</li>
            </ul>
            <p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p>
            <ol>
                <li>ç‚¹å‡»"æ”¶èµ·"æŒ‰é’®ï¼ŒæŸ¥è¯¢æ¡ä»¶åº”è¯¥éšè—ï¼ŒæŒ‰é’®æ–‡æœ¬å˜ä¸º"å±•å¼€"</li>
                <li>ç‚¹å‡»"å±•å¼€"æŒ‰é’®ï¼ŒæŸ¥è¯¢æ¡ä»¶åº”è¯¥æ˜¾ç¤ºï¼ŒæŒ‰é’®æ–‡æœ¬å˜ä¸º"æ”¶èµ·"</li>
                <li>è§‚å¯Ÿè°ƒè¯•é¢æ¿ä¸­çš„æ‰§è¡Œæ—¥å¿—</li>
            </ol>
        </div>

        <!-- æ¨¡æ‹ŸæŸ¥è¯¢è¡¨å• -->
        <div class="search-form">
            <div class="search-header">
                <div class="search-actions">
                    <a href="javascript:void(0)" class="toggle-link" id="search-toggle">
                        <span id="toggle-text">æ”¶èµ·</span>
                        <span id="toggle-icon">â–²</span>
                    </a>
                </div>
            </div>
            
            <div class="search-row">
                <div class="form-group">
                    <label>å•†å“åç§°</label>
                    <input type="text" placeholder="è¯·è¾“å…¥å•†å“åç§°">
                </div>
                <div class="form-group">
                    <label>å•†å“ç¼–ç </label>
                    <input type="text" placeholder="è¯·è¾“å…¥å•†å“ç¼–ç ">
                </div>
                <div class="form-group">
                    <label>å“ç‰Œ</label>
                    <input type="text" placeholder="è¯·è¾“å…¥å“ç‰Œ">
                </div>
            </div>
            
            <div class="search-row">
                <div class="form-group">
                    <label>å‹å·</label>
                    <input type="text" placeholder="è¯·è¾“å…¥å‹å·">
                </div>
                <div class="form-group">
                    <label>åˆ›å»ºäºº</label>
                    <input type="text" placeholder="è¯·è¾“å…¥åˆ›å»ºäºº">
                </div>
                <div class="form-group">
                    <label>åˆ›å»ºæ—¶é—´</label>
                    <input type="date">
                </div>
            </div>
            
            <div class="search-row">
                <div class="form-group">
                    <label>çŠ¶æ€</label>
                    <select>
                        <option>å…¨éƒ¨</option>
                        <option>å¾…å¤„ç†</option>
                        <option>å·²å®Œæˆ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ä¼˜å…ˆçº§</label>
                    <select>
                        <option>å…¨éƒ¨</option>
                        <option>é«˜</option>
                        <option>ä¸­</option>
                        <option>ä½</option>
                    </select>
                </div>
                <div class="form-group">
                    <button class="btn btn-primary">æŸ¥è¯¢</button>
                    <button class="btn btn-secondary">é‡ç½®</button>
                </div>
            </div>
        </div>

        <div class="debug-panel">
            <h4>ğŸ› è°ƒè¯•è¾“å‡º</h4>
            <div id="debug-output" class="debug-output">
                <div class="info">[åˆå§‹åŒ–] é¡µé¢åŠ è½½å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œ...</div>
            </div>
        </div>
    </div>

    <script>
        // è°ƒè¯•è¾“å‡ºå‡½æ•°
        function debugLog(message, type = 'info') {
            const output = document.getElementById('debug-output');
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = type;
            div.textContent = `[${time}] ${message}`;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        // æŠ˜å /å±•å¼€æŸ¥è¯¢è¡¨å• - ä½¿ç”¨ä¿®å¤åçš„é€»è¾‘
        function toggleSearchForm() {
            debugLog('toggleSearchForm å‡½æ•°è¢«è°ƒç”¨', 'info');
            
            try {
                const searchRows = document.querySelectorAll('.search-row');
                const toggleText = document.getElementById('toggle-text');
                const toggleIcon = document.getElementById('toggle-icon');
                
                debugLog(`æ‰¾åˆ° ${searchRows.length} ä¸ªæŸ¥è¯¢è¡Œ`, 'info');
                debugLog(`å½“å‰æŒ‰é’®æ–‡æœ¬: "${toggleText ? toggleText.textContent : 'null'}"`, 'info');
                
                if (!searchRows.length) {
                    debugLog('é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æŸ¥è¯¢è¡Œå…ƒç´ ', 'error');
                    return;
                }
                
                if (!toggleText || !toggleIcon) {
                    debugLog('é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æŒ‰é’®æ–‡æœ¬æˆ–å›¾æ ‡å…ƒç´ ', 'error');
                    return;
                }
                
                // æ£€æŸ¥å½“å‰çŠ¶æ€
                const isCollapsed = searchRows[0].classList.contains('hidden');
                debugLog(`å½“å‰çŠ¶æ€: ${isCollapsed ? 'å·²æ”¶èµ·' : 'å·²å±•å¼€'}`, 'info');
                
                if (isCollapsed) {
                    // å±•å¼€
                    debugLog('æ‰§è¡Œå±•å¼€æ“ä½œ...', 'success');
                    searchRows.forEach((row, index) => {
                        row.classList.remove('hidden');
                        debugLog(`å±•å¼€ç¬¬ ${index + 1} è¡Œ`, 'success');
                    });
                    toggleText.textContent = 'æ”¶èµ·';
                    toggleIcon.textContent = 'â–²';
                    debugLog('å±•å¼€å®Œæˆï¼ŒæŒ‰é’®æ–‡æœ¬æ”¹ä¸º"æ”¶èµ·"', 'success');
                } else {
                    // æ”¶èµ·
                    debugLog('æ‰§è¡Œæ”¶èµ·æ“ä½œ...', 'success');
                    searchRows.forEach((row, index) => {
                        row.classList.add('hidden');
                        debugLog(`éšè—ç¬¬ ${index + 1} è¡Œ`, 'success');
                    });
                    toggleText.textContent = 'å±•å¼€';
                    toggleIcon.textContent = 'â–¼';
                    debugLog('æ”¶èµ·å®Œæˆï¼ŒæŒ‰é’®æ–‡æœ¬æ”¹ä¸º"å±•å¼€"', 'success');
                }
                
                debugLog('toggleSearchForm å‡½æ•°æ‰§è¡Œå®Œæˆ', 'success');
                
            } catch (error) {
                debugLog(`é”™è¯¯: ${error.message}`, 'error');
                console.error('toggleSearchForm é”™è¯¯:', error);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('é¡µé¢DOMåŠ è½½å®Œæˆï¼Œå¼€å§‹ç»‘å®šäº‹ä»¶...', 'info');
            
            const toggleBtn = document.getElementById('search-toggle');
            if (toggleBtn) {
                debugLog('æ‰¾åˆ°æŠ˜å æŒ‰é’®ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶', 'success');
                toggleBtn.addEventListener('click', function(event) {
                    debugLog('æŒ‰é’®è¢«ç‚¹å‡»', 'info');
                    event.preventDefault();
                    toggleSearchForm();
                });
                debugLog('äº‹ä»¶ç»‘å®šå®Œæˆ', 'success');
            } else {
                debugLog('é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æŠ˜å æŒ‰é’®', 'error');
            }
            
            debugLog('åˆå§‹åŒ–å®Œæˆï¼ŒæŠ˜å åŠŸèƒ½å·²å°±ç»ª', 'success');
        });
    </script>
</body>
</html>